<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Trang Login</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            background-color: #62a9d8;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: Arial, sans-serif;
        }
        .login-box {
            width: 350px;
            padding: 30px;
            text-align: center;
            border-radius: 15px;
            background-color: #83b9e7;
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.2);

        }
        .create-box {
            display: none;
            width: 350px;
            padding: 30px;
            text-align: center;
            border-radius: 15px;
            background-color: #83b9e7;
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.2);
        }
        .hidden {
            display: none;
        }
        .avatar {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            margin: 0 auto 15px;
            background-color: #fff;
            background-image: url('https://cdn-icons-png.flaticon.com/512/847/847969.png');
            background-size: cover;
        }
        h2 {
            color: white;
            margin-bottom: 25px;
            font-weight: normal;
        }
        .input-box{
            width: 100%;
            margin-bottom: 25px;
            position: relative;
        }
        .input-box input {
            width: 300px;
            padding: 10px 15px 10px 40px;
            border: none;
            border-radius: 5px;
            background-color: #fff;
            font-size: 15px;
            outline: none;
            transition: 0.2s;

        }
        .input-box input:focus {
            border-color: #477eff;
            box-shadow: 0 0 6px rgba(92, 141, 255, 0.5);
        }
        .input-box img {
            width: 20px;
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0.7;   /*Độ trong suốt */
        }
        .button-login {
            width: 100%;
            padding: 12px;
            margin-top: 8px;
            color: white;
            font-size: 15px;
            border: none;
            border-radius: 20px;
            background-color: #2b6cb1;
            transition: 0.2s;

        }
        .button-login:hover {
            background-color: #1e4e85;
        }
        .button-create {
            width: auto;
            padding: 12px;
            color: #1f6fb3;
            font-size: 15px;
            border: 1px solid #2b6cb1;
            border-radius: 20px;
            background-color: #fff;
            transition: 0.2s;       
        }
        .button-create:hover {
            background:#e7e7e7;
        }
        .return {
            margin-top: 15px;
            color: black;
            text-decoration: underline;
            font-size: 15px;
        }

        .return:hover {
            opacity: 0.7;
        }
        p {
            font-size: 16px;
        }

    </style>

    <!-- Liên kết css -->
    <!-- <link rel="stylesheet" href="style.css"> -->

</head>
<body>
    <!-- login -->
    <div class="login-box">
        <div class="avatar"></div>  
        <h2>LOGIN</h2>

        <div class="input-box">
            <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png">
            <input id="tk" type = "text" placeholder="Tên đăng nhập">
        </div>

        <div class="input-box">
            <img src="https://cdn-icons-png.flaticon.com/512/3064/3064197.png">
            <input id="mk" type = "password" placeholder="Password">
        </div>

        <button class="button-login" onclick="login()">Log In</button>
        <hr>
        <p>Bạn chưa có tài khoản?</p>
        <button class="button-create" onclick="dangky()">Create new Account</button>
    </div>

    <!-- sign up -->
    <div class="create-box">
        <h2>SIGN UP</h2>

        <div class="input-box">
            <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png">
            <input id="new_user" type = "text" placeholder="user name">
        </div>
        
        <div class="input-box">
            <img src="https://cdn-icons-png.flaticon.com/128/13/13936.png">
            <input id="new_sdt" type = "number" placeholder="Số điện thoại">
        </div>

        <div class="input-box">
            <img src="https://cdn-icons-png.flaticon.com/128/646/646135.png">
            <input id="new_email" type = "email" placeholder="Email">
        </div>

        <div class="input-box">
            <img src="https://cdn-icons-png.flaticon.com/512/3064/3064197.png">
            <input id="new_mk" type = "password" placeholder="Password">
        </div>

        <button class="button-create" onclick="tao_tk()">Create Account</button>
        <p class="return" onclick="backToLogin()">Quay lại</p>
    </div>


    <script>
        //chuyển sang sign up
        function dangky() { 
            document.querySelector('.login-box').classList.add('hidden'); 
            document.querySelector('.create-box').style.display = 'block'; 
        } 
        
        //quay lại login
        function backToLogin() { 
            document.querySelector('.create-box').style.display = 'none'; 
            document.querySelector('.login-box').classList.remove('hidden'); 
        }

        //khởi tạo tài khoản admin
        if (!localStorage.getItem('ds_tk')) {
            let ds = [
                { user: 'admin', pass: '1', quyen: 'admin' }
            ];
            localStorage.setItem('ds_tk', JSON.stringify(ds));
        }
        //đăng nhập
        function login() { 
            // Ẩn khung login khi signup
            document.querySelector('.create-box').style.display = 'none'; 
            document.querySelector('.login-box').classList.remove('hidden');
            
            //đăng nhập tài khoản
            let tk = document.getElementById('tk').value;
            let mk = document.getElementById('mk').value;

            let ds = JSON.parse(localStorage.getItem('ds_tk')) || [];

        for (let acc of ds) {
            if (acc.user === tk && acc.pass === mk) {

                localStorage.setItem("dangnhap", JSON.stringify(acc));

                alert("Đăng nhập thành công!");

                // chuyển trang
                location.href = "quanly.html";

                return;
            }
        }

        alert("Sai tài khoản hoặc mật khẩu!");
    }

        // đăng ký
        function tao_tk() {
            let user = document.getElementById("new_user").value;
            let email = document.getElementById("new_email").value;
            let pass = document.getElementById("new_mk").value;

            if (user == "" || email == "" || pass == "") {
                alert("Vui lòng nhập đầy đủ thông tin!");
                return;
            }

            let ds = JSON.parse(localStorage.getItem('ds_tk')) || [];

            // kiểm tra trùng username
            for (let tk of ds) {
                if (tk.user === user) {
                    alert("Tên tài khoản đã tồn tại!");
                    return;
                }
            }

            ds.push({ user, pass, quyen: "user" }); // user tự tạo = quyền user

            localStorage.setItem('ds_tk', JSON.stringify(ds));

            alert("Tạo tài khoản thành công!");
            backToLogin();
        }
    </script>
    <!-- Liên kết JS -->
    <!-- <script src="script.js"></script> -->

</body>
</html>