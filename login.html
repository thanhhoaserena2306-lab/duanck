
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Trang Login</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            background-color: #62a9d8;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: Arial, sans-serif;
        }
        .login-box {
            width: 350px;
            padding: 30px;
            text-align: center;
            border-radius: 15px;
            background-color: #83b9e7;
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.2);

        }
        .create-box {
            display: none;
            width: 350px;
            padding: 30px;
            text-align: center;
            border-radius: 15px;
            background-color: #83b9e7;
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.2);
        }
        .hidden {
            display: none;
        }
        .avatar {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            margin: 0 auto 15px;
            background-color: #fff;
            background-image: url('https://cdn-icons-png.flaticon.com/512/847/847969.png');
            background-size: cover;
        }
        h2 {
            color: white;
            margin-bottom: 25px;
            font-weight: normal;
        }
        .input-box{
            width: 100%;
            margin-bottom: 25px;
            position: relative;
        }
        .input-box input {
            width: 300px;
            padding: 10px 15px 10px 40px;
            border: none;
            border-radius: 5px;
            background-color: #fff;
            font-size: 15px;
            outline: none;
            transition: 0.2s;

        }
        .input-box input:focus {
            border-color: #477eff;
            box-shadow: 0 0 6px rgba(92, 141, 255, 0.5);
        }
        .input-box img {
            width: 20px;
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0.7;   /*Độ trong suốt */
        }
        .button-login {
            width: 100%;
            padding: 12px;
            margin-top: 8px;
            color: white;
            font-size: 15px;
            border: none;
            border-radius: 20px;
            background-color: #2b6cb1;
            transition: 0.2s;

        }
        .button-login:hover {
            background-color: #1e4e85;
        }
        .button-create {
            width: auto;
            padding: 12px;
            color: #1f6fb3;
            font-size: 15px;
            border: 1px solid #2b6cb1;
            border-radius: 20px;
            background-color: #fff;
            transition: 0.2s;       
        }
        .button-create:hover {
            background:#e7e7e7;
        }
        p {
            font-size: 16px;
        }

    </style>

    <!-- Liên kết css -->
    <!-- <link rel="stylesheet" href="style.css"> -->

</head>
<body>
    <!-- LOGIN -->
    <div class="login-box">
        <div class="avatar"></div>  
        <h2>LOGIN</h2>

        <!-- Tên đăng nhập -->
        <div class="input-box">
            <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png">
            <input id="dn_tk" type = "text" placeholder="Tên đăng nhập">
        </div>

        <!-- Mật khẩu -->
        <div class="input-box">
            <img src="https://cdn-icons-png.flaticon.com/512/3064/3064197.png">
            <input id="dn_mk" type = "password" placeholder="Mật khẩu">
        </div>

        <button class="button-login" onclick="login()">Đăng nhập</button>
        <hr>
        <p>Bạn chưa có tài khoản?</p>
        <button class="button-create" onclick="dangky()">Tạo tài khoản mới</button>
    </div>

    <!-- SIGN UP -->
    <div class="create-box">
        <h2>SIGN UP</h2>
        
        <div class="input-box">
            <img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png">
            <input id="dk_tk" type = "text" placeholder="Tên đăng nhập">
        </div>

        <div class="input-box">
            <img src="https://cdn-icons-png.flaticon.com/512/3064/3064197.png">
            <input id="dk_mk" type = "password" placeholder="Mật khẩu">
        </div>

        <button class="button-create" onclick="tao_tk()">Tạo tài khoản</button>
        <p class="return" onclick="backToLogin()">Quay lại</p>
    </div>


    <script>

        //Khởi tạo tài khoản với quyền admin
        if (!localStorage.getItem('ds_tk')) {
            let ds_admin = [
                {taikhoan: 'thhoa', matkhau: '1', quyen: 'admin'},
                {taikhoan: 'dieuan', matkhau: '1', quyen: 'admin'}
            ];

        localStorage.setItem('ds_tk', JSON.stringify(ds_admin));
        }
                
        //Chuyển sang sign up
        function dangky() { 
            document.querySelector('.login-box').classList.add('hidden'); 
            document.querySelector('.create-box').style.display = 'block'; 
        } 
        
        //Quay lại login
        function backToLogin() { 
            document.querySelector('.create-box').style.display = 'none'; 
            document.querySelector('.login-box').classList.remove('hidden'); 
        }

        //Đăng Ký tài khoản (quyền User)
        function tao_tk() {
            let ds_tk = JSON.parse(localStorage.getItem('ds_tk')) || [];

            let tk = document.getElementById('dk_tk').value;
            let mk = document.getElementById('dk_mk').value;
           
            //kiểm tra nhập đầy đủ
            if (!tk || !mk) {
                alert("Vui lòng nhập đầy đủ!");
                return;
            }
            
            //kiểm tra trùng tài khoản
            for (let i = 0; i < ds_tk.length; i++) {
                if (ds_tk[i].taikhoan === tk) {
                    alert("Tài khoản đã tồn tại!");
                    return;
                }
            }

            //tai khoan moi (quyền user)
            ds_tk.push({
                taikhoan: tk,
                matkhau: mk,
                quyen: "user",
            })

            localStorage.setItem('ds_tk', JSON.stringify(ds_tk));

            alert("Tạo tài khoản thành công!");

            // Xóa nội dung ô nhập sau khi đăng kí xong
            document.getElementById('dk_tk').value = "";
            document.getElementById('dk_mk').value = "";
            backToLogin();
        }

        //Đăng nhập
        function login() { 
            let ds_tk = JSON.parse(localStorage.getItem('ds_tk')) || [];

            let tk = document.getElementById('dn_tk').value;
            let mk = document.getElementById('dn_mk').value;

            if (ds_tk.length == 0) {
                alert("Chưa có tài khoản nào!");
                return;
            }
            else {
                for (let i = 0; i < ds_tk.length; i++) {
                    if (ds_tk[i].taikhoan == tk && ds_tk[i].matkhau == mk) {
                        //lưu thông tin người dùng
                        localStorage.setItem('user', JSON.stringify(ds_tk[i]));
                        alert("Đăng nhập thành công!");
                        
                        // Xóa nội dung ô nhập sau khi đăng nhập xong
                        document.getElementById('dn_tk').value = "";
                        document.getElementById('dn_mk').value = "";

                        //chuyển trang sau khi đăng nhập
                        location.href = "quanly.html";

                        return;
                    }
                }
                alert("Sai tài khoản hoặc sai mật khẩu!");
            }
        }
        
    </script>
    <!-- Liên kết JS -->
    <!-- <script src="script.js"></script> -->

</body>
</html>